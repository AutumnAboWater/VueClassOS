<script setup>
import {RouterLink} from "vue-router";
import {ref} from "vue";
import axios from "axios";
import {ElMessage} from "element-plus";
import router from "@/router/index.js";
const userData = ref(
    {
      id:'',
      userName:'',
<<<<<<< HEAD
      userPassWord:''
=======
      userPassWord:'',
      userGander:''
>>>>>>> 4ddbf2b (æäº¤ä»£ç )
    }
)
const clearStyle = () => {


}
const userManager = ([])
const selectUserData = () => {
  let userExists = false;
  let passwordCorrect = false;
  axios
      .get('userData')
      .then((response)=>{
        userManager.value =response.data
<<<<<<< HEAD
        console.log("è´¦æˆ·åä¸º:",userData.value.userName)
        console.log("ç”¨æˆ·å¯†ç ä¸º:",userData.value.userPassWord)
        console.log("æ•°æ®åº“ç”¨æˆ·å:",userManager.value[0].userName)
        console.log("æ•°æ®åº“ç”¨æˆ·å¯†ç :",userManager.value[0].userPassWord)
=======
>>>>>>> 4ddbf2b (æäº¤ä»£ç )
        for (let i = 0; i < userManager.value.length; i++) {
          if (userData.value.userName === userManager.value[i].userName) {
            userExists = true;
            if (userData.value.userPassWord === userManager.value[i].userPassWord) {
              passwordCorrect = true;
<<<<<<< HEAD
              const bodyElement = document.body
              bodyElement.setAttribute('style', '');
=======
              userData.value.userGander = userManager.value[i].userGander
>>>>>>> 4ddbf2b (æäº¤ä»£ç )
              break;
            }
          }
        }
        if (userExists) {
          if (passwordCorrect) {
<<<<<<< HEAD
            router.push({path:'/Home', query: { fromLogin: 'true' }})
=======
            ElMessage.success('ç™»å½•æˆåŠŸï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ğŸ›©')
            router.push({path:'/Home', query: {
              fromLogin: 'true',
                finalUserName: userData.value.userName,
                GanderMessage: userData.value.userGander
              }})
>>>>>>> 4ddbf2b (æäº¤ä»£ç )
          } else {
            ElMessage.error('å¯†ç é”™è¯¯');
          }
        } else {
          ElMessage.error('ç”¨æˆ·ä¸å­˜åœ¨');
        }
          }
      )
      .catch(()=>ElMessage.error('ç™»é™†å¤±è´¥'))
}

</script>

<template>
  <el-card :data="userManager" shadow="always">
    <div class="card-header">
<<<<<<< HEAD
      <span>è¯¾ç¨‹ç®¡ç†ç³»ç»Ÿâ€”â€”ç™»å½•</span>
=======
      <h2>è¯¾ç¨‹ç®¡ç†ç³»ç»ŸğŸ˜</h2>
>>>>>>> 4ddbf2b (æäº¤ä»£ç )
    </div>
    <el-form>
      <el-form-item label="è´¦å·">
        <!--    è´¦å·-->
        <el-input
            v-model="userData.userName"
            clearable
        />
      </el-form-item>
      <el-form-item label="å¯†ç ">
        <el-input
            v-model="userData.userPassWord"
            type="password"
            show-password
        />
      </el-form-item>
      <el-form-item>
        <RouterLink to="/"><el-button @click="selectUserData()" type="primary">ç™»å½•</el-button></RouterLink>
        <RouterLink to="/Register"><el-button type="success">æ³¨å†Œ</el-button></RouterLink>
<<<<<<< HEAD

=======
>>>>>>> 4ddbf2b (æäº¤ä»£ç )
      </el-form-item>
    </el-form>
  </el-card>
</template>
<style scoped>
.card-header{
  display: flex;
  justify-content: space-between;
  align-items: center;
}
</style>
